<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.jn.enterprise.company.dao.CompanyMapper">

    <!-- 获取员工列表邀请状态 -->
    <select id="getLastModify" resultType="com.jn.enterprise.company.entity.TbServiceCompanyModify">
        SELECT
          a.id AS "id",
          a.com_id AS "comId",
          a.com_name AS "comName",
          a.com_name_short AS "comNameShort",
          a.avatar AS "avatar",
          a.unify_code AS "unifyCode",
          a.owner_law AS "ownerLaw",
          a.owner_phone AS "ownerPhone",
          a.com_property AS "comProperty",
          a.reg_capital AS "regCapital",
          a.com_scale AS "comScale",
          a.founding_time AS "foundingTime",
          a.run_time AS "runTime",
          a.indu_type AS "induType",
          a.indu_code AS "induCode",
          a.business_license AS "businessLicense",
          a.propaganda_picture AS "propagandaPicture",
          a.main_products AS "mainProducts",
          a.com_address AS "comAddress",
          a.com_tele AS "comTele",
          a.com_web AS "comWeb",
          a.com_server AS "comServer",
          a.com_demand AS "comDemand",
          a.addr_park AS "addrPark",
          a.com_synopsis AS "comSynopsis",
          a.check_status AS "checkStatus",
          a.check_time AS "checkTime",
          a.com_source AS "comSource",
          a.affiliated_park AS "affiliatedPark",
          a.creator_account AS "creatorAccount",
          a.created_time AS "createdTime"
        FROM tb_service_company_modify a
        WHERE a.com_id = #{comId}
        ORDER BY a.created_time DESC
        LIMIT 1
    </select>


    <!-- 查询企业列表New -->
    <select id="getCompanyNewList" parameterType="com.jn.company.model.ServiceEnterpriseParam" resultType="com.jn.company.model.ServiceEnterpriseCompany">
        SELECT
        t.id as "id",
        t.com_name as "comName",
        t.com_name_short as "comNameShort",
        t.avatar as "avatar",
        t.com_admin as "comAdmin",
        t.com_web as "comWeb",
        t.com_synopsis as "comSynopsis",
        t.park_build_id as "parkBuildId",
        t.park_build_name as "parkBuildName",
        t.com_type as "comType",
        t.com_source as "comSource",
        t.propaganda_picture as "proImgs",
        t.unify_code as "unifyCode",
        t.com_server as "comServer",
        t.com_demand as "comDemand",
        t.browse_number as "browseNumber",
        t.creator_account as "creatorAccount",
        t.created_time as "createdTime"
        FROM
        tb_service_company t
        WHERE t.record_status = 1
        AND t.check_status = 1
        <if test="@org.apache.commons.lang.StringUtils@isNotBlank(comName)">
        AND t.com_name LIKE concat(concat('%',#{comName,jdbcType=VARCHAR}),'%')
        </if>
        <if test="@org.apache.commons.lang.StringUtils@isNotBlank(comSource)">
        AND t.com_source = #{comSource,jdbcType=VARCHAR}
        </if>
        <if test="@org.apache.commons.lang.StringUtils@isNotBlank(affiliatedPark)">
        AND t.affiliated_park = #{affiliatedPark,jdbcType=VARCHAR}
        </if>
        <if test="@org.apache.commons.lang.StringUtils@isNotBlank(induType)">
        AND t.indu_type = #{induType,jdbcType=VARCHAR}
        </if>
        ORDER BY ${orderByClause} desc

    </select>
    <select id="getCompanyDetails" resultType = "com.jn.enterprise.company.model.CompanyInfoShow">
      select
          t1.id as "companyId"
          ,t1.com_name as "comName"
          ,t1.avatar as "avatar"
          ,t1.com_web as "comWeb"
          ,t1.affiliated_park as "affiliatedId"
          ,t1.affiliated_name as "affiliatedName"
          ,t1.com_server as "comServer"
          ,t1.com_demand as "comDemand"
          ,t1.founding_time as "foundingTime"
          ,t1.com_type as "comType"
          ,t1.com_address as "comAddress"
          ,t1.browse_number as "browseNumber"
          ,t1.browse_number as "browseNumber"
          ,t1.com_synopsis as  "comSynopsis"
          ,t1.addr_park "addrPark"
          ,t1.com_tele "conTele"
          ,t1.owner_law "ownerLaw"
          ,t1.owner_phone "ownerPhone"
          ,t1.products "products"
        from tb_service_company t1
         where t1.id=#{companyId};
    </select>

</mapper>