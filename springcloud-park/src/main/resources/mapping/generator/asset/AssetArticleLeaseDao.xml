<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.jn.park.asset.dao.AssetArticleLeaseDao">
    <select id="getArticleLeaseList" resultType="com.jn.park.asset.model.AssetArticleLeaseModel">
        SELECT
            id,
            asset_number         AS assetNumber,
            NAME,
            type_id              AS typeId,
            asset_type           AS assetType,
            specification,
            qr_code              AS qrCode,
            lease_cash           AS leaseCash,
            lease_price          AS leasePrice,
            lease_time           AS leaseTime,
            img_url              AS imgUrl,
            article_introduction AS articleIntroduction,
            lease_enterprise     AS leaseEnterprise,
            contact_name         AS contactName,
            contact_phone        AS contactPhone,
            start_time           AS startTime,
            end_time             AS endTime
        FROM
            tb_asset_article_lease
        WHERE
                record_status = '1'
                AND is_lease = '1'
                AND article_status = '0'
           OR article_status = '5'
    </select>

    <select id="getArticleLease" parameterType="java.lang.String"
            resultType="com.jn.park.asset.model.AssetArticleLeaseModel">
        SELECT
            id,
            asset_number         AS assetNumber,
            NAME,
            type_id              AS typeId,
            asset_type           AS assetType,
            specification,
            qr_code              AS qrCode,
            lease_cash           AS leaseCash,
            lease_price          AS leasePrice,
            lease_time           AS leaseTime,
            img_url              AS imgUrl,
            article_introduction AS articleIntroduction,
            article_status       AS articleStatus,
            lease_enterprise     AS leaseEnterprise,
            contact_name         AS contactName,
            contact_phone        AS contactPhone,
            start_time           AS startTime,
            end_time             AS endTime
        FROM
            tb_asset_article_lease
        WHERE
            asset_number = #{assetNumber}
    </select>

    <update id="updateStatus" parameterType="java.util.Map">
        UPDATE tb_asset_article_lease
        SET article_status = #{status}
        WHERE
            asset_number = #{assetNumber}
    </update>

    <select id="searchArticleList" parameterType="java.lang.String"
            resultType="com.jn.park.asset.model.AssetArticleLeaseModel">
        SELECT
            id,
            asset_number         AS assetNumber,
            NAME,
            type_id              AS typeId,
            asset_type           AS assetType,
            specification,
            qr_code              AS qrCode,
            lease_cash           AS leaseCash,
            lease_price          AS leasePrice,
            lease_time           AS leaseTime,
            img_url              AS imgUrl,
            article_introduction AS articleIntroduction,
            article_status       AS articleStatus,
            lease_enterprise     AS leaseEnterprise,
            contact_name         AS contactName,
            contact_phone        AS contactPhone,
            start_time           AS startTime,
            end_time             AS endTime
        FROM
            tb_asset_article_lease
        WHERE
            NAME like CONCAT('%', #{name}, '%')
          AND record_status = '1'
          AND is_lease = '1'
          AND article_status IN ('0', '5')
    </select>
</mapper>
