<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.jn.portals.activity.dao.ActivityTypeMapper">

    <!--活动类型列表查询 -->
    <select id="findActivityTypeListByState" resultType="com.jn.portals.activity.vo.ActivityTypeVO">
        select
            t.type_id as typeId
            ,t.type_name as typeName
            ,t.state as state
            ,t.create_account as createAccount
            ,t.create_time as createTime
            ,t.update_account as updateAccpunt
            ,t.update_time as updateTime
            ,count(f.type_id) as fileTotal
        from   tb_activity_type t
        left join  tb_activity_file f  on  t.type_id = f.type_id
        where 1=1
        and   t.state != '-1'
        <if test="state != null and state!=''">
              and t.state = #{state,jdbcType=VARCHAR}
        </if>
        group by   t.type_id
    </select>

    <!--具体活动类型展示
    <select id="findActivityTypeByState" resultMap="ActivityMap">
        select t.type_id as typeId
            ,t.type_name as typeName
            ,t.state as state
            ,f.file_src as fileSrc
        from   tb_activity_type t
        left join  tb_activity_file f  on  t.type_id = f.type_id
        where 1=1
        and   t.type_id = 'id';
    </select>
    <resultMap id="ActivityMap" type="bean">
        <id column="typeId" property="typeId" javaType="java.lang.String" jdbcType="VARCHAR"/>
        <result column="typeName" property="typeName" javaType="java.lang.String" jdbcType="VARCHAR"/>
        <result column="state" property="state" javaType="java.lang.String" jdbcType="VARCHAR"/>
        <collection column="fileSrc" property="fileSrc" ofType="java.lang.String"  javaType="java.util.List"/>
    </resultMap>
-->
</mapper>